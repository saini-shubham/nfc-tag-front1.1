(this["webpackJsonpstarter-bt5"]=this["webpackJsonpstarter-bt5"]||[]).push([[4],{1002:function(e,t,c){},1086:function(e,t,c){"use strict";c.r(t);var n=c(4),a=c(12),s=c(20),i=c(893),r=c(891),l=c(899),j=c(889),b=c(76),o=c.n(b),d=c(390),u=c(884),O=c(888),g=c(895),x=(c(1e3),c(3)),h=c(1),f=(c(417),function(e){return Object(x.jsx)(s.g,{children:Object(x.jsx)(s.h,{children:Object(x.jsxs)("div",{className:"d-flex",children:[Object(x.jsx)("div",{className:"circle-box lg-box d-inline-block ".concat(e.bg),children:Object(x.jsx)("i",{className:e.icon})}),Object(x.jsxs)("div",{className:"ms-3",children:[Object(x.jsx)("h3",{className:"mb-0 font-weight-bold",children:e.earning}),Object(x.jsx)("small",{className:"text-muted",children:e.subtitle})]})]})})})}),m=(c(948),c(949),c(950),c(951),c(952),c(60)),v=c(26),p=c(91),w=(c(183),c(272)),N=c(84),S=c(124),C=(c(1002),c.p+"static/media/spinner.e8697d57.gif"),D=Object(h.createContext)({scan:null,write:null,setActions:function(){}}),k=function(){var e=Object(h.useContext)(D),t=e.actions,c=e.setActions;return Object(x.jsxs)("div",{className:"scanner",children:[Object(x.jsx)("p",{className:"scanner-exit",onClick:function(){return c(Object(n.a)(Object(n.a)({},t),{},{scan:null}))},children:"X"}),Object(x.jsxs)("div",{className:"scanner-container",children:[Object(x.jsx)("img",{src:C,alt:"spinning log",className:"scanner-image"}),Object(x.jsx)("p",{className:"scanner-text",children:"Scanning..."})]})]})},y=(c(282),c(258),c(45)),E=c.n(y),F=c(71),T=function(){var e=Object(h.useState)(""),t=Object(a.a)(e,2),c=(t[0],t[1]),n=Object(v.e)(),s=Object(h.useState)(),i=Object(a.a)(s,2),r=i[0],l=i[1],j=Object(h.useContext)(D),b=j.actions,o=j.setActions,d=Object(F.c)(),u=Object(h.useCallback)(Object(S.a)(Object(N.a)().mark((function e(){var t;return Object(N.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("NDEFReader"in window)){e.next=13;break}return e.prev=1,t=new window.NDEFReader,e.next=5,t.scan();case 5:console.log("Scan started successfully."),t.onreadingerror=function(){console.log("Cannot read data from the NFC tag. Try another one?")},t.onreading=function(e){console.log("NDEF message read."),O(e),o({scan:"scanned",write:null})},e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("Error! Scan failed to start: ".concat(e.t0,"."));case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),[o]),O=function(e){var t=e.message,n=e.serialNumber;l(n);var a,s=Object(w.a)(t.records);try{for(s.s();!(a=s.n()).done;){var i=a.value;if("text"===i.recordType){var r=new TextDecoder(i.encoding);c(r.decode(i.data))}}}catch(j){s.e(j)}finally{s.f()}};return Object(h.useEffect)((function(){u()}),[u]),Object(x.jsx)(x.Fragment,{children:"scanned"===b.scan?Object(x.jsxs)("div",{children:["scanner"===d&&n("/tags/scan/"+r),"tagger"===d&&n("/tags/register/"+r),"admin"===d&&n("/tags/register/"+r),"superAdmin"===d&&n("/tags/register/"+r)]}):Object(x.jsx)(k,{status:b.scan})})},A=c(63),R=c(221);c(421),t.default=function(){var e=Object(h.useState)(o()()),t=Object(a.a)(e,2),c=t[0],b=t[1],w=Object(h.useState)(""),N=Object(a.a)(w,2),S=N[0],C=N[1],k=Object(h.useState)([]),y=Object(a.a)(k,2),z=(y[0],y[1]),Q=Object(h.useState)(),Y=Object(a.a)(Q,2),I=(Y[0],Y[1]),H=Object(v.e)(),J=(Object(p.b)(),Object(h.useState)(!1)),M=Object(a.a)(J,2),P=M[0],W=M[1],B=Object(p.c)((function(e){return e.tagDetails.tagScanStatus})),L=Object(h.useState)(null),V=Object(a.a)(L,2),X=V[0],q=V[1],G=X||{},K=G.scan,U=(G.write,{actions:X,setActions:q}),Z=Object(h.useState)(),$=Object(a.a)(Z,2),_=$[0],ee=$[1];Object(h.useEffect)((function(){ee(Object(F.c)())}),[]);var te=function(e){q(Object(n.a)({},e))};Object(h.useState)({total:"",scanned:"",left:""});Object(h.useEffect)((function(){console.log(B),W(B)}),[B]),Object(h.useEffect)((function(){var e=sessionStorage.getItem("userCity");console.log("!!",e),z(e)}),[]),Object(h.useEffect)((function(){if(""!==S){var e=o()(c).format("D/M/YYYY");I(e);var t={date:e,cityName:S};console.log(t),A.a.getTagStatusForVisitor(t).then((function(e){console.log(e.data),W((function(t){return Object(n.a)(Object(n.a)({},t),{},{total:e.data.totalTags,scanned:e.data.scannedTags,left:e.data.notScanned})}))})).catch((function(e){console.log(e),E.a.fire({icon:"error",title:"Error",text:e.response.data.message})}))}}),[c,S]);return Object(x.jsxs)("div",{children:[Object(x.jsxs)(s.F,{children:[Object(x.jsx)(s.n,{sm:"6",lg:"6",children:("scanner"===_||"admin"===_||"superAdmin"===_)&&Object(x.jsx)(m.a,{title:"Scan Tag",children:Object(x.jsxs)(s.F,{children:[Object(x.jsx)(s.n,{lg:"4",children:Object(x.jsx)("div",{className:"mt-3",children:Object(x.jsx)(s.e,{color:"primary",size:"lg",disabled:"scanner"!==_,onClick:function(){return te({scan:"scanning",write:null})},children:"Scan"})})}),Object(x.jsx)(s.n,{lg:"4",children:Object(x.jsx)("div",{className:"mt-3",children:Object(x.jsx)(s.e,{size:"lg",color:"warning",disabled:"scanner"!==_,onClick:function(){return H("/tags/scanQr")},children:"Scan QR"})})})]})})}),Object(x.jsx)(s.n,{sm:"6",lg:"6",children:("tagger"===_||"admin"===_||"superAdmin"===_)&&Object(x.jsx)(m.a,{title:"Register New Tag",children:Object(x.jsxs)(s.F,{children:[Object(x.jsx)(s.n,{lg:"6",children:Object(x.jsx)("div",{className:"mt-3",children:Object(x.jsx)(s.e,{color:"primary",size:"lg",onClick:function(){return te({scan:"scanning",write:null})},children:"Register Tag"})})}),Object(x.jsx)(s.n,{lg:"6",children:Object(x.jsx)("div",{className:"mt-3",children:Object(x.jsx)(s.e,{color:"warning",size:"lg",onClick:function(){return H("/tags/scanQr")},children:"Register QR"})})})]})})})]}),("visitor"===_||"admin"===_||"superAdmin"===_)&&Object(x.jsxs)(s.F,{children:[Object(x.jsx)(s.n,{sm:"6",lg:"3",children:Object(x.jsxs)(R.a,{children:[Object(x.jsxs)(l.a,{sx:{marginBottom:1,minWidth:"100%"},children:[Object(x.jsx)(i.a,{id:"demo-simple-select-autowidth-label",children:"City"}),Object(x.jsxs)(j.a,{labelId:"city",id:"city",value:S,onChange:function(e){C(e.target.value)},autoWidth:!0,label:"City",children:[Object(x.jsx)(r.a,{value:"",children:Object(x.jsx)("em",{children:"None"})}),Object(x.jsx)(r.a,{value:"Ellenabad",children:"Ellenabad"}),Object(x.jsx)(r.a,{value:"Hisar",children:"Hisar"}),Object(x.jsx)(r.a,{value:"Sirsa",children:"Sirsa"}),Object(x.jsx)(r.a,{value:"Delhi",children:"Delhi"})]})]}),Object(x.jsx)(d.a,{dateAdapter:u.a,children:Object(x.jsx)(O.a,{value:c,onChange:function(e){console.log("!!",e),b(e)},renderInput:function(e){return Object(x.jsx)(g.a,Object(n.a)({},e))},disableFuture:!0,shouldDisableDate:function(e){var t=new Date(e);if(t>new Date)return!0;var c=new Date;return c.setDate(c.getDate()-60),t<c}})})]})}),Object(x.jsx)(s.n,{sm:"6",lg:"3",children:Object(x.jsx)(f,{bg:"bg-light-info text-into",title:"Sales",subtitle:"Total",earning:P.total,icon:"bi bi-bag"})}),Object(x.jsx)(s.n,{sm:"6",lg:"3",children:Object(x.jsx)(f,{bg:"bg-light-warning text-warning",title:"New Project",subtitle:"Scanned",earning:P.scanned,icon:"bi bi-basket3"})}),Object(x.jsx)(s.n,{sm:"6",lg:"3",children:Object(x.jsx)(f,{bg:"bg-light-danger text-danger",title:"Refunds",subtitle:"Left",earning:P.left,icon:"bi bi-wrong"})})]}),Object(x.jsx)(D.Provider,{value:U,children:K&&Object(x.jsx)(T,{})})]})}},948:function(e,t,c){"use strict";var n=c(20),a=c(3);t.a=function(e){return Object(a.jsxs)(n.g,{children:[Object(a.jsx)(n.j,{alt:"Card image cap",src:e.image}),Object(a.jsxs)(n.h,{className:"p-4",children:[Object(a.jsx)(n.m,{tag:"h5",children:e.title}),Object(a.jsx)(n.k,{children:e.subtitle}),Object(a.jsx)(n.l,{className:"mt-3",children:e.text}),Object(a.jsx)(n.e,{color:e.color,children:"Read More"})]})]})}},949:function(e,t,c){"use strict";t.a=c.p+"static/media/bg1.537e9bd5.jpg"},950:function(e,t,c){"use strict";t.a=c.p+"static/media/bg2.94ab4b60.jpg"},951:function(e,t,c){"use strict";t.a=c.p+"static/media/bg3.5668e1f0.jpg"},952:function(e,t,c){"use strict";t.a=c.p+"static/media/bg4.62319dde.jpg"}}]);
//# sourceMappingURL=4.8928686e.chunk.js.map